"use strict";function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass(Constructor,protoProps,staticProps){return protoProps&&_defineProperties(Constructor.prototype,protoProps),staticProps&&_defineProperties(Constructor,staticProps),Constructor}var form=document.getElementById("form"),list=document.querySelector(".list-group"),Task=function(){function Task(){_classCallCheck(this,Task)}return _createClass(Task,null,[{key:"createTask",value:function createTask(body){return fetch("https://ratatype-c2d32.firebaseio.com/tasks.json",{method:"POST",body:JSON.stringify(body),headers:{"Content-Type":"application/json"}}).then((function(response){return response.ok?response.json():response.json().then((function(err){var e=new Error("Упс! Что то пошло не так!");throw e.data=err,e}))})).then((function(data){return body.id=data.name,body})).then(setToLocalStorage).catch((function(err){console.log(err)})).finally(loading)}}]),Task}();function addTask(e){e.preventDefault();var task=document.getElementById("addNewTask");loading(),Task.createTask({text:task.value.trim(),date:new Date,done:!1}),task.focus(),form.reset()}function setToLocalStorage(task){var tasks=[];tasks.push(task),localStorage.setItem("task",JSON.stringify(tasks))}function getFromLocalStorage(){JSON.parse(localStorage.getItem("tasks"))}function loading(){var loading=document.querySelector(".loading");if(loading.children.length>0)return loading.textContent="",void(loading.style.display="none");loading.insertAdjacentHTML("afterbegin",'<img src="img/loading.gif" alt="" class="loading__img">'),loading.style.display="flex"}form.addEventListener("submit",addTask);
//# sourceMappingURL=main.js.map
